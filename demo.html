<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <link rel="stylesheet" href="">
</head>

<body>

  <script>
    const fn = ops => {
      let red = [];
      ops.forEach(arr => {
        let [type, start, end] = arr;
        if (type) {
          for (let i = 0; i < red.length; i++) {
            if (red[i].start <= start && red[i].start + red[i].len >= start || (red[i].start > start && red[i].start <= end)) {
              if (red[i].start > start && red[i].start <= end) {
                red[i].len = red[i].len + red[i].start - start;
                red[i].start = start;
              }
              if (red[i].start + red[i].len >= end) return;
              if (red[i].start.len >= end - red[i].start) return;
              let j = 1;
              while (i + j < red.length && red[i + j].start < end) {
                j++;
              }
              if (i + j >= red.length) {
                if (red[red.length - 1].start + red[red.length - 1].len >= end) {
                  red[i].len = red[red.length - 1].start + red[red.length - 1].len - red[i].start;
                } else {
                  red[i].len = end - red[i].start;
                }
                red.splice(i + 1, j - 1);
                return;
              } else if (red[i + j].start === end) {
                red[i].len = red[i + j].len + red[i + j].start - red[i].start;
                red.splice(i + 1, j);
              } else {
                j--;
                red[i].len = end - red[i].start;
                red.splice(i + 1, j);
              }
              return;
            } else if (red[i].start > start) {
              red.splice(i, 0, {
                start,
                len: end - start
              })
              return;
            }
          }
          red.push({
            start,
            len: end - start
          })
        } else {
          for (let i = 0; i < red.length; i++) {
            if (red[i].start > end) return;
            if (red[i].start >= start) {
              const currEnd = red[i].start + red[i].len;
              if (currEnd < end) {
                start = currEnd + 1;
                red.splice(i, 1);
                i--;
              } else if (currEnd > end) {
                red[i].len = currEnd - end - 1;
                red[i].start = end + 1;
                return;
              } else {
                red.splice(i, 1);
                return;
              }
            } else {
              const currEnd = red[i].start + red[i].len;
              if (currEnd >= start) {
                red[i].len = start - red[i].start - 1;
                if (currEnd > end) {
                  red.splice(i, 0, {
                    start: end,
                    len: currEnd - end,
                  })
                } else if (currEnd < end) {
                  start = currEnd + 1;
                } else {
                  return;
                }
              }
            }
          }
        }
      })
      return red;
    }
    // console.log(fn([[1, 1, 3], [1, 5, 7]]))
    console.log(fn([[1, 1, 3], [1, 5, 7], [1, 2, 4]])) // 1 3, 5 2
    console.log(fn([[1, 1, 3], [1, 5, 7], [1, 2, 6]])) // 1 6
    console.log(fn([[1, 1, 3], [1, 5, 7], [1, 2, 8]])) // 1 7
    console.log(fn([[1, 2, 4], [1, 6, 8], [1, 1, 3]])) // 1 3, 6 2
    console.log(fn([[1, 2, 4], [1, 6, 8], [1, 1, 5]])) // 1 4, 6 2
    console.log(fn([[1, 2, 4], [1, 6, 8], [1, 1, 7]])) // 1 7
    console.log(fn([[1, 2, 4], [1, 6, 8], [1, 1, 9]])) // 1 8
    console.log(fn([[1, 1, 3], [1, 5, 7], [0, 2, 4]])) // 1 0, 5 2
    console.log(fn([[1, 1, 3], [1, 5, 7], [0, 2, 6]])) // 1 0, 7 0
    console.log(fn([[1, 1, 3], [1, 5, 7], [0, 2, 8]])) // 1 0
    console.log(fn([[1, 2, 4], [1, 6, 8], [0, 1, 3]])) // 4 0, 6 2
    console.log(fn([[1, 2, 4], [1, 6, 8], [0, 1, 5]])) // 6 2
    console.log(fn([[1, 2, 4], [1, 6, 8], [0, 1, 7]])) // 8 0
    console.log(fn([[1, 2, 4], [1, 6, 8], [0, 1, 9]])) // 
    var data = [
      [1, 3],
      [0, 1],
      [-1, 1]
    ];
    var a = Math.random();
    var b = Math.random();
    var c = Math.random();
    var wc = 0;
    data.forEach(item => {
      wc += Math.pow(a * item[0] * item[0] + b * item[0] + c - item[1], 2);
    })
    wc / data.length;
    console.log(wc)
  </script>
</body>

</html>